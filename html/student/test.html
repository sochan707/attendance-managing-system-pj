<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
    <style>
        @keyframes pulse-warning {
        0%,100% { opacity: 1; }
        50% { opacity: .6; }
        }
        .animate-warning {
        animation: pulse-warning 1.2s infinite;
        }
    </style>
</head>
<body class="bg-[#EEEEEE] font-roboto">

<!-- NAVBAR -->
    <nav class="bg-[#2A4759] w-full shadow-2xl">
        <div class="max-w-[1440px] mx-auto flex flex-row justify-between items-center px-4 py-4">
        <div class="text-[#F79B72] font-bold text-4xl">logo</div>
        <div class="flex gap-2">
            <button class="border border-[#F79B72] w-24 h-8 rounded-lg text-[#F79B72] font-bold duration-200 ease-in-out hover:bg-[#eeeeee] hover:border-none">Log in</button>
            <button class="bg-[#F79B72] w-24 h-8 rounded-lg text-white font-bold duration-200 ease-in-out hover:bg-[#eeeeee] hover:text-[#F79B72]">Sign in</button>
            <!-- <button><img src="icon/account_circle_24dp_F79B72_FILL0_wght400_GRAD0_opsz24.svg" class="w-30 h-30" alt=""></button> -->
        </div>

        </div>
    </nav>

<!-- page content -->
<main class="max-w-[1440px] mx-auto px-4">
  
  <h1 class="mt-12 text-4xl font-bold">Events</h1>

    <nav class="mt-8 flex gap-8">
    <button id="allTab" class="tab-btn font-bold border-b-4 border-[#F79B72]">
        All Events
    </button>
    <button id="myTab" class="tab-btn text-slate-500 hover:text-black">
        My Registered Events
    </button>
    </nav>
  <div class="w-full h-px bg-gray-300 my-4"></div>

  <div class="flex flex-row gap-4">
  <div class=" relative flex-1 max-w-[438px]">
  <!-- Search Icon -->
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 pointer-events-none"
    viewBox="0 -960 960 960"
    fill="currentColor"
  >
    <path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
  </svg>

  <!-- Input -->
  <input type="search" class="w-full  rounded-lg p-3 pl-10  focus:outline-none" placeholder="Search by event name or keyword...">

</div>
  <button
    class="relative h-12 px-2 pl-8 sm:pl-12 sm:px-6 rounded-lg bg-white font-bold border border-gray-300 hover:bg-gray-100"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-4 sm:w-5 text-gray-500 pointer-events-none"
      viewBox="0 -960 960 960"
      fill="currentColor"
    >
      <path d="M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"/>
    </svg>Category</button>
    <button
    class="relative h-12 px-4 pl-8 sm:pl-12 sm:px-6 rounded-lg bg-white font-bold border border-gray-300 hover:bg-gray-100"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-4 sm:w-5 text-gray-500 pointer-events-none"
      viewBox="0 -960 960 960"
      fill="currentColor"
    >
      <path d="M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"/>
    </svg>Data Range</button>
</div>

<!-- GRID -->
  <div class="mt-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 place-items-center">

    <!-- CARD 1 -->
    <div class="event-card w-[310px] bg-white rounded-xl shadow-md"
     data-id="1"
     data-registered="false"
     data-total="70"
     data-left="15">
        <div class="p-4 space-y-3">
            <h2 class="font-semibold text-lg">Introduction to Machine Learning</h2>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">calendar_today</span>
            October 26, 2026
            </div>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">schedule</span>
            10:00 AM – 12:00 PM
            </div>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">location_on</span>
            Cosmo Hall
            </div>

            <p class="text-sm text-gray-700">
            Beginner-friendly workshop covering machine learning basics.
            </p>

            <div class="space-y-1">
            <div class="seats-text flex justify-between text-xs font-medium"></div>
            <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                <div class="progress-bar h-full rounded-full transition-all"></div>
            </div>
            </div>

            <button class="action-btn w-full h-10 mt-3 rounded-lg font-medium transition">
            Register
            </button>
        </div>
    </div>

    <!-- CARD 2 -->
    <div class="event-card w-[310px] bg-white rounded-xl shadow-md"
     data-id="2"
     data-registered="false"
     data-total="70"
     data-left="30">
        <div class="p-4 space-y-3">
            <h2 class="font-semibold text-lg">Campus Social Mixer</h2>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">calendar_today</span>
            October 26, 2026
            </div>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">schedule</span>
            9:00 AM – 12:00 PM
            </div>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">location_on</span>
            Unicorn Hall
            </div>

            <p class="text-sm text-gray-700">
                Meet new people, enjoy free food, and relax before midterms.
            </p>

            <div class="space-y-1">
            <div class="seats-text flex justify-between text-xs font-medium"></div>
            <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                <div class="progress-bar h-full rounded-full transition-all"></div>
            </div>
            </div>

            <button class="action-btn w-full h-10 mt-3 rounded-lg font-medium transition">
            Register
            </button>
        </div>
    </div>

    <!-- CARD 3 -->
    <div class="event-card w-[310px] bg-white rounded-xl shadow-md"
     data-id="3"
     data-registered="false"
     data-total="70"
     data-left="9">
        <div class="p-4 space-y-3">
            <h2 class="font-semibold text-lg">Guest Lecture: The Future of AI</h2>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">calendar_today</span>
            November 2, 2026
            </div>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">schedule</span>
            8:00 AM – 11:30 PM
            </div>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">location_on</span>
                A204, ITB
            </div>

            <p class="text-sm text-gray-700">
                Dr. Evelyn Reed discusses AI trends and ethics.
            </p>

            <div class="space-y-1">
            <div class="seats-text flex justify-between text-xs font-medium"></div>
            <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                <div class="progress-bar h-full rounded-full transition-all"></div>
            </div>
            </div>

            <button class="action-btn w-full h-10 mt-3 rounded-lg font-medium transition">
            Register
            </button>
        </div>
    </div>

    <!-- CARD 4 -->
    <div class="event-card w-[310px] bg-white rounded-xl shadow-md"
     data-id="4"
     data-registered="false"
     data-total="70"
     data-left="0">
        <div class="p-4 space-y-3">
            <h2 class="font-semibold text-lg">Senior Project Showcase</h2>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">calendar_today</span>
            November 5, 2026
            </div>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">schedule</span>
            9:00 AM – 12:00 PM
            </div>

            <div class="flex items-center gap-2 text-xs text-gray-600">
            <span class="material-icons-outlined text-sm">location_on</span>
                Cosmo Hall
            </div>

            <p class="text-sm text-gray-700">
                Explore innovative senior projects and network with students.
            </p>

            <div class="space-y-1">
            <div class="seats-text flex justify-between text-xs font-medium"></div>
            <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                <div class="progress-bar h-full rounded-full transition-all"></div>
            </div>
            </div>

            <button class="action-btn w-full h-10 mt-3 rounded-lg font-medium transition">
            Register
            </button>
        </div>
    </div>

    <!-- CARD 5 -->
    <div class="event-card w-[310px] bg-white rounded-xl shadow-md"
     data-id="5"
     data-registered="false"
     data-total="70"
     data-left="0">
      <div class="p-4 space-y-3">
        <h2 class="font-semibold text-lg">Senior Project Showcase</h2>

        <div class="flex items-center gap-2 text-xs text-gray-600">
          <span class="material-icons-outlined text-sm">calendar_today</span>
          November 5, 2026
        </div>

        <div class="flex items-center gap-2 text-xs text-gray-600">
          <span class="material-icons-outlined text-sm">schedule</span>
          9:00 AM – 12:00 PM
        </div>

        <div class="flex items-center gap-2 text-xs text-gray-600">
          <span class="material-icons-outlined text-sm">location_on</span>
          Cosmo Hall
        </div>

        <p class="text-sm text-gray-700">
          Explore innovative senior projects and network with students.
        </p>

        <div class="space-y-1">
          <div class="seats-text flex justify-between text-xs font-medium"></div>
          <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
            <div class="progress-bar h-full rounded-full transition-all"></div>
          </div>
        </div>

        <button class="action-btn w-full h-10 mt-3 rounded-lg font-medium transition">
          Register
        </button>
      </div>
    </div>

  </div>
</main>

<!-- CANCEL MODAL -->
<div id="cancelModal"
     class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
  <div class="bg-white w-[360px] rounded-xl p-6 space-y-4">
    <h2 class="font-bold text-lg">Cancel Registration</h2>

    <p class="text-sm text-gray-600">
      Are you sure you want to cancel this event?
    </p>

    <textarea id="cancelReason"
      class="w-full border rounded-lg p-2 text-sm"
      placeholder="Reason for cancellation..."></textarea>

    <div class="flex justify-end gap-3">
      <button id="closeModal" class="px-4 py-2 text-gray-600">Back</button>
      <button id="confirmCancel"
              class="px-4 py-2 bg-red-600 text-white rounded-lg">
        Confirm
      </button>
    </div>
  </div>
</div>

<!-- LOGIC -->
<script>

document.addEventListener('click', e => {
  if (!e.target.classList.contains('action-btn')) return;

  const card = e.target.closest('.event-card');
  const eventId = card.dataset.id;

  // IF NOT REGISTERED → GO TO FORM
  if (card.dataset.registered === 'false') {
    localStorage.setItem('selectedEventId', eventId);
    window.location.href = 'eventRegisterForm.html';
  } else {
    openModal(card);
  }
});

/* ---------------- PROGRESS BAR ---------------- */
document.querySelectorAll('.event-card').forEach(card => {
  const total = +card.dataset.total;
  const left = +card.dataset.left;
  const percent = ((total - left) / total) * 100;

  const bar = card.querySelector('.progress-bar');
  const text = card.querySelector('.seats-text');
  const btn = card.querySelector('.action-btn');

  bar.style.width = percent + '%';

  if (left === 0) {
    bar.classList.add('bg-red-500');
    text.innerHTML = `<span class="text-red-600">Full</span><span>${total}</span>`;
    btn.disabled = true;
    btn.textContent = 'Full';
    btn.classList.add('bg-gray-300','cursor-not-allowed');
  } else if (left <= 10) {
    bar.classList.add('bg-orange-500','animate-warning');
    text.innerHTML = `<span class="text-orange-600">${left} left</span><span>${total}</span>`;
  } else {
    bar.classList.add('bg-green-500');
    text.innerHTML = `<span class="text-green-600">${left} left</span><span>${total}</span>`;
  }

  updateButton(card);
});

/* ---------------- REGISTER / CANCEL ---------------- */
function updateButton(card) {
  const btn = card.querySelector('.action-btn');
  if (card.dataset.registered === 'true') {
    btn.textContent = 'Cancel';
    btn.className = 'action-btn w-full h-10 mt-3 rounded-lg bg-[#2A4759] text-[#F79B72]';
  } else {
    btn.textContent = 'Register';
    btn.className = 'action-btn w-full h-10 mt-3 rounded-lg bg-[#2A4759] text-white';
  }
}

document.addEventListener('click', e => {
  if (!e.target.classList.contains('action-btn')) return;

  const card = e.target.closest('.event-card');

  if (card.dataset.registered === 'false') {
    card.dataset.registered = 'true';
    updateButton(card);
  } else {
    openModal(card);
  }
});

/* ---------------- MODAL ---------------- */
let selectedCard = null;
const modal = document.getElementById('cancelModal');
const reasonInput = document.getElementById('cancelReason');

function openModal(card) {
  selectedCard = card;
  modal.classList.remove('hidden');
  modal.classList.add('flex');
}

document.getElementById('closeModal').onclick = () => {
  modal.classList.add('hidden');
  reasonInput.value = '';
};

document.getElementById('confirmCancel').onclick = () => {
  if (!reasonInput.value.trim()) {
    alert('Please provide a reason.');
    return;
  }

  selectedCard.dataset.registered = 'false';
  updateButton(selectedCard);

  if (currentTab === 'my') {
    selectedCard.remove();
  }

  modal.classList.add('hidden');
  reasonInput.value = '';
};

/* ---------------- TABS ---------------- */
const allTab = document.getElementById('allTab');
const myTab = document.getElementById('myTab');
let currentTab = 'all';

allTab.onclick = () => {
  currentTab = 'all';
  switchTab();
};

myTab.onclick = () => {
  currentTab = 'my';
  switchTab();
};

function switchTab() {
  allTab.classList.remove('border-b-4','border-[#F79B72]');
  myTab.classList.remove('border-b-4','border-[#F79B72]');

  document.querySelectorAll('.event-card').forEach(card => {
    if (currentTab === 'all') {
      card.classList.remove('hidden');
      allTab.classList.add('border-b-4','border-[#F79B72]');
    } else {
      myTab.classList.add('border-b-4','border-[#F79B72]');
      card.dataset.registered === 'true'
        ? card.classList.remove('hidden')
        : card.classList.add('hidden');
    }
  });
}
</script>

</body>
</html>